(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"./src/searchTable/SearchTable.mdx":function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return f}));var a=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),r=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),s=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js"),o=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),i=(t("./node_modules/antd/es/input/style/css.js"),t("./node_modules/antd/es/input/index.js")),l=(t("./node_modules/antd/es/form/style/css.js"),t("./node_modules/antd/es/form/index.js")),c=(t("./node_modules/antd/es/button/style/css.js"),t("./node_modules/antd/es/button/index.js")),d=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),u=t("react"),b=t.n(u),m=t("./node_modules/@mdx-js/react/dist/esm.js"),p=t("./node_modules/father/node_modules/docz/dist/index.esm.js"),h=(t("./node_modules/antd/dist/antd.css"),t("./src/searchTable/SearchTable.tsx")),g={};function f(e){var n=e.components,t=Object(d.a)(e,["components"]);return Object(m.b)("wrapper",Object.assign({},g,t,{components:n,mdxType:"MDXLayout"}),Object(m.b)("h1",{id:"searchtable"},"SearchTable"),Object(m.b)("p",null,"\u4e00\u4e2a\u5e26\u641c\u7d22\u6d41\u7a0b\u63a7\u5236\u7684\u8868\u683c\u7ec4\u4ef6"),Object(m.b)("h3",{id:"\u4e3b\u8981\u505a\u4e86\u4ee5\u4e0b\u5de5\u4f5c"},"\u4e3b\u8981\u505a\u4e86\u4ee5\u4e0b\u5de5\u4f5c"),Object(m.b)("ul",null,Object(m.b)("li",{parentName:"ul"},"\u5904\u7406\u5206\u9875\u64cd\u4f5c"),Object(m.b)("li",{parentName:"ul"},"\u5904\u7406\u4e86\u8bf7\u6c42\u4e2d\u52a8\u753b"),Object(m.b)("li",{parentName:"ul"},"\u5904\u7406\u4e86\u9009\u62e9\u64cd\u4f5c"),Object(m.b)("li",{parentName:"ul"},"\u8bf7\u6c42\u53c2\u6570\u53d8\u5316\u65f6\uff0c\u81ea\u52a8\u53d1\u51fa\u8bf7\u6c42"),Object(m.b)("li",{parentName:"ul"},"\u6570\u636e\u4e0d\u6ee1\u4e00\u9875\u65f6\uff0c\u81ea\u52a8\u9690\u85cf\u5206\u9875\u5668")),Object(m.b)("h3",{id:"\u4f60\u53ef\u4ee5"},"\u4f60\u53ef\u4ee5"),Object(m.b)("ul",null,Object(m.b)("li",{parentName:"ul"},"\u5168\u5c40\u8bbe\u7f6epageSize\uff0c\u6bcf\u4e2a\u8868\u683c\u5355\u72ec\u8bbe\u7f6epageSize"),Object(m.b)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u4e00\u9875\u7684\u6570\u91cf"),Object(m.b)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u662f\u5426\u4f7f\u7528\u201c\u81ea\u52a8\u9690\u85cf\u5206\u9875\u5668\u201d"),Object(m.b)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u8bf7\u6c42\u65b9\u6cd5"),Object(m.b)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u8868\u683c\u7684\u9644\u4ef6\u5143\u7d20\uff0c\u4f8b\u5982\u6279\u91cf\u5220\u9664\uff0c\u641c\u7d22\u8868\u5355"),Object(m.b)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u641c\u7d22\u53c2\u6570 "),Object(m.b)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u6570\u636e\u4e0d\u6ee1\u4e00\u9875\u65f6\uff0c\u662f\u5426\u663e\u793a\u5206\u9875\u5668"),Object(m.b)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u662f\u5426\u53ef\u9009\u62e9"),Object(m.b)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u8868\u683c\u6837\u5f0f\uff0c\u7c7b\u540d"),Object(m.b)("li",{parentName:"ul"},"\u900f\u4f20props\u7ed9antd\u7684Table")),Object(m.b)("h2",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),Object(m.b)("p",null,"\u6d89\u53ca\u7f51\u7edc\u64cd\u4f5c\uff0c\u5efa\u8bae\u5728\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u9650\u5236\u540e\u89c2\u5bdf\u793a\u4f8b"),Object(m.b)("h2",{id:"\u57fa\u672c\u7528\u6cd5"},"\u57fa\u672c\u7528\u6cd5"),Object(m.b)(p.c,{__position:0,__code:"<SearchTable\n  columns={[\n    {\n      title: '\u59d3\u540d',\n      dataIndex: 'name',\n    },\n  ]}\n  getListFunction={() => {\n    return fetch('./').then(() => {\n      return {\n        total: 3,\n        dataSource: [\n          {\n            id: 1,\n            name: 'a',\n          },\n          {\n            id: 2,\n            name: 'b',\n          },\n          {\n            id: 3,\n            name: 'c',\n          },\n        ],\n      }\n    })\n  }}\n/>",__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,SearchTable:h.a,Button:c.a,Form:l.a,Input:i.a},__codesandbox:"undefined",mdxType:"Playground"},Object(m.b)(h.a,{columns:[{title:"\u59d3\u540d",dataIndex:"name"}],getListFunction:function(){return fetch("./").then((function(){return{total:3,dataSource:[{id:1,name:"a"},{id:2,name:"b"},{id:3,name:"c"}]}}))},mdxType:"SearchTable"})),Object(m.b)("h2",{id:"\u8bbe\u7f6e\u8868\u53ef\u62d6\u52a8"},"\u8bbe\u7f6e\u8868\u53ef\u62d6\u52a8"),Object(m.b)(p.c,{__position:1,__code:"<SearchTable\n  columns={[\n    {\n      title: '\u59d3\u540d',\n      dataIndex: 'name',\n    },\n    {\n      title: '\u5e74\u9f84',\n      dataIndex: 'age',\n    },\n  ]}\n  dragEnable\n  getListFunction={() => {\n    return fetch('./').then(() => {\n      return {\n        total: 1,\n        dataSource: [\n          {\n            id: 1,\n            name: 'a',\n            age: 25,\n          },\n          {\n            id: 2,\n            name: 'b',\n            age: 28,\n          },\n          {\n            id: 3,\n            name: 'c',\n            age: 23,\n          },\n        ],\n      }\n    })\n  }}\n/>",__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,SearchTable:h.a,Button:c.a,Form:l.a,Input:i.a},__codesandbox:"undefined",mdxType:"Playground"},Object(m.b)(h.a,{columns:[{title:"\u59d3\u540d",dataIndex:"name"},{title:"\u5e74\u9f84",dataIndex:"age"}],dragEnable:!0,getListFunction:function(){return fetch("./").then((function(){return{total:1,dataSource:[{id:1,name:"a",age:25},{id:2,name:"b",age:28},{id:3,name:"c",age:23}]}}))},mdxType:"SearchTable"})),Object(m.b)("h2",{id:"\u4e0d\u81ea\u52a8\u9690\u85cf\u5206\u9875\u5668"},"\u4e0d\u81ea\u52a8\u9690\u85cf\u5206\u9875\u5668"),Object(m.b)(p.c,{__position:2,__code:"<SearchTable\n  disableAutoHidePage\n  columns={[\n    {\n      title: '\u59d3\u540d',\n      dataIndex: 'name',\n    },\n  ]}\n  getListFunction={() => {\n    return fetch('./').then(() => {\n      return {\n        total: 3,\n        dataSource: [\n          {\n            id: 1,\n            name: 'a',\n          },\n          {\n            id: 2,\n            name: 'b',\n          },\n          {\n            id: 3,\n            name: 'c',\n          },\n        ],\n      }\n    })\n  }}\n/>",__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,SearchTable:h.a,Button:c.a,Form:l.a,Input:i.a},__codesandbox:"undefined",mdxType:"Playground"},Object(m.b)(h.a,{disableAutoHidePage:!0,columns:[{title:"\u59d3\u540d",dataIndex:"name"}],getListFunction:function(){return fetch("./").then((function(){return{total:3,dataSource:[{id:1,name:"a"},{id:2,name:"b"},{id:3,name:"c"}]}}))},mdxType:"SearchTable"})),Object(m.b)("h2",{id:"\u81ea\u5b9a\u4e49pagesize"},"\u81ea\u5b9a\u4e49pageSize"),Object(m.b)(p.c,{__position:3,__code:"<SearchTable\n  pageSize={2}\n  columns={[\n    {\n      title: '\u59d3\u540d',\n      dataIndex: 'name',\n    },\n  ]}\n  getListFunction={(current, pageSize) => {\n    console.log(current, pageSize)\n    return fetch('./').then(() => {\n      return {\n        total: 134,\n        dataSource: new Array(pageSize).fill(0).map((item, index) => {\n          const id = (current - 1) * pageSize + index\n          return {\n            id,\n            name: `name${id}`,\n          }\n        }),\n      }\n    })\n  }}\n/>",__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,SearchTable:h.a,Button:c.a,Form:l.a,Input:i.a},__codesandbox:"undefined",mdxType:"Playground"},Object(m.b)(h.a,{pageSize:2,columns:[{title:"\u59d3\u540d",dataIndex:"name"}],getListFunction:function(e,n){return console.log(e,n),fetch("./").then((function(){return{total:134,dataSource:new Array(n).fill(0).map((function(t,a){var r=(e-1)*n+a;return{id:r,name:"name".concat(r)}}))}}))},mdxType:"SearchTable"})),Object(m.b)("h2",{id:"\u6dfb\u52a0\u9644\u52a0\u64cd\u4f5c"},"\u6dfb\u52a0\u9644\u52a0\u64cd\u4f5c"),Object(m.b)(p.c,{__position:4,__code:"<SearchTable\n  pageSize={3}\n  selectedEnable\n  renderExtra={data => {\n    const { selectedRowKeys, selectedRows, loading, refresh } = data\n    return (\n      <div style={{ padding: '10px 0' }}>\n        <Button\n          disabled={!selectedRowKeys || !selectedRowKeys.length}\n          style={{ marginRight: 10 }}\n          loading={loading}\n          danger\n          onClick={() => {\n            alert(\n              selectedRowKeys ? selectedRowKeys.join() : '\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u884c',\n            )\n          }}\n        >\n          \u5220\u9664\u5168\u90e8\n        </Button>\n        <Button\n          loading={loading}\n          onClick={() => {\n            refresh()\n          }}\n        >\n          \u5237\u65b0\n        </Button>\n      </div>\n    )\n  }}\n  columns={[\n    {\n      title: '\u59d3\u540d',\n      dataIndex: 'name',\n    },\n  ]}\n  getListFunction={(current, pageSize) => {\n    return fetch('./').then(() => {\n      return {\n        total: 5,\n        dataSource: new Array(pageSize).fill(0).map((item, index) => {\n          const id = (current - 1) * pageSize + index\n          return {\n            id,\n            name: `name${id}`,\n          }\n        }),\n      }\n    })\n  }}\n/>",__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,SearchTable:h.a,Button:c.a,Form:l.a,Input:i.a},__codesandbox:"undefined",mdxType:"Playground"},Object(m.b)(h.a,{pageSize:3,selectedEnable:!0,renderExtra:function(e){var n=e.selectedRowKeys,t=(e.selectedRows,e.loading),a=e.refresh;return Object(m.b)("div",{style:{padding:"10px 0"}},Object(m.b)(c.a,{disabled:!n||!n.length,style:{marginRight:10},loading:t,danger:!0,onClick:function(){alert(n?n.join():"\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u884c")},mdxType:"Button"},"\u5220\u9664\u5168\u90e8"),Object(m.b)(c.a,{loading:t,onClick:function(){a()},mdxType:"Button"},"\u5237\u65b0"))},columns:[{title:"\u59d3\u540d",dataIndex:"name"}],getListFunction:function(e,n){return fetch("./").then((function(){return{total:5,dataSource:new Array(n).fill(0).map((function(t,a){var r=(e-1)*n+a;return{id:r,name:"name".concat(r)}}))}}))},mdxType:"SearchTable"})),Object(m.b)("h2",{id:"\u7ed3\u5408form\u8bbe\u7f6e\u8bf7\u6c42\u53c2\u6570"},"\u7ed3\u5408form\u8bbe\u7f6e\u8bf7\u6c42\u53c2\u6570"),Object(m.b)("p",null,"\u5728\u8f93\u5165\u6846\u8f93\u5165\u6587\u5b57\uff0c\u7136\u540e\u70b9\u51fb\u641c\u7d22\u6309\u94ae\uff0c\u89c2\u5bdf\u8bf7\u6c42\u53c2\u6570"),Object(m.b)(p.c,{__position:5,__code:'class Demo extends React.Component {\n    constructor(props) {\n      super(props)\n      this.formInstance = null\n      this.state = {\n        formValue: null,\n        tableLoading: false,\n      }\n    }\n\n    renderExtra(props) {\n      const { loading, setSearchParams } = props\n      return (\n        <Form\n          ref={target => {\n            this.formInstance = target\n          }}\n          layout="inline"\n          onFinish={value => {\n            setSearchParams(value)\n          }}\n          style={{ marginBottom: 10 }}\n        >\n          <Form.Item label="\u7528\u6237\u540d" name="userName">\n            <Input />\n          </Form.Item>\n          <Button\n            type="primary"\n            htmlType="submit"\n            loading={loading}\n            style={{ marginRight: 10 }}\n          >\n            \u641c\u7d22\n          </Button>\n          <Button\n            loading={loading}\n            onClick={() => {\n              if (this.formInstance) {\n                this.formInstance.resetFields()\n                setSearchParams({})\n              }\n            }}\n          >\n            \u91cd\u7f6e\n          </Button>\n        </Form>\n      )\n    }\n\n    render() {\n      const { tableLoading, formValue } = this.state\n      return (\n        <div>\n          <SearchTable\n            renderExtra={this.renderExtra}\n            columns={[\n              {\n                title: \'\u59d3\u540d\',\n                dataIndex: \'name\',\n              },\n            ]}\n            onLoadingChange={loading => {\n              this.setState({ tableLoading: loading })\n            }}\n            getListFunction={(current, pageSize, params) => {\n              return fetch(\n                `./?current=${current}&pageSize=${pageSize}&key=${\n                  params && params.userName ? params.userName : \'\'\n                }`,\n              ).then(() => {\n                return {\n                  total: 134,\n                  dataSource: new Array(pageSize)\n                    .fill(0)\n                    .map((item, index) => {\n                      const id = (current - 1) * pageSize + index\n                      return {\n                        id,\n                        name: `name${id}`,\n                      }\n                    }),\n                }\n              })\n            }}\n          />\n        </div>\n      )\n    }\n  }',__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,SearchTable:h.a,Button:c.a,Form:l.a,Input:i.a},__codesandbox:"undefined",mdxType:"Playground"},function(e){Object(o.a)(t,e);var n=Object(s.a)(t);function t(e){var r;return Object(a.a)(this,t),(r=n.call(this,e)).formInstance=null,r.state={formValue:null,tableLoading:!1},r}return Object(r.a)(t,[{key:"renderExtra",value:function(e){var n=this,t=e.loading,a=e.setSearchParams;return Object(m.b)(l.a,{ref:function(e){n.formInstance=e},layout:"inline",onFinish:function(e){a(e)},style:{marginBottom:10},mdxType:"Form"},Object(m.b)(l.a.Item,{label:"\u7528\u6237\u540d",name:"userName"},Object(m.b)(i.a,{mdxType:"Input"})),Object(m.b)(c.a,{type:"primary",htmlType:"submit",loading:t,style:{marginRight:10},mdxType:"Button"},"\u641c\u7d22"),Object(m.b)(c.a,{loading:t,onClick:function(){n.formInstance&&(n.formInstance.resetFields(),a({}))},mdxType:"Button"},"\u91cd\u7f6e"))}},{key:"render",value:function(){var e=this,n=this.state;n.tableLoading,n.formValue;return Object(m.b)("div",null,Object(m.b)(h.a,{renderExtra:this.renderExtra,columns:[{title:"\u59d3\u540d",dataIndex:"name"}],onLoadingChange:function(n){e.setState({tableLoading:n})},getListFunction:function(e,n,t){return fetch("./?current=".concat(e,"&pageSize=").concat(n,"&key=").concat(t&&t.userName?t.userName:"")).then((function(){return{total:134,dataSource:new Array(n).fill(0).map((function(t,a){var r=(e-1)*n+a;return{id:r,name:"name".concat(r)}}))}}))},mdxType:"SearchTable"}))}}]),t}(b.a.Component)),Object(m.b)("h2",{id:"\u5c5e\u6027"},"\u5c5e\u6027"),Object(m.b)(p.d,{of:h.a,mdxType:"Props"}))}f&&f===Object(f)&&Object.isExtensible(f)&&Object.defineProperty(f,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"src/searchTable/SearchTable.mdx"}}),f.isMDXComponent=!0},"./src/searchTable/SearchTable.tsx":function(e,n,t){"use strict";var a=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),r=t.n(a),s=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),o=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),i=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),l=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),c=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js"),d=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),u=(t("./node_modules/antd/es/table/style/css.js"),t("./node_modules/antd/es/table/index.js")),b=t("react"),m=t.n(b);u.a.Column;"undefined"!==typeof ITableResponse&&ITableResponse&&ITableResponse===Object(ITableResponse)&&Object.isExtensible(ITableResponse)&&Object.defineProperty(ITableResponse,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ITableResponse",filename:"src/searchTable/SearchTable.tsx"}}),"undefined"!==typeof ISearchTableExtra&&ISearchTableExtra&&ISearchTableExtra===Object(ISearchTableExtra)&&Object.isExtensible(ISearchTableExtra)&&Object.defineProperty(ISearchTableExtra,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ISearchTableExtra",filename:"src/searchTable/SearchTable.tsx"}});var p=function(e){Object(d.a)(a,e);var n,t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).refresh=function(){n.requestList()},n.setSearchParams=function(e){var t=n.props.onSearchParamsChange;n.setState({searchParams:e},(function(){n.changePage(1),t&&t(e)}))},n.setColumn=function(e,t){for(var a=n.state.newColumns,r=[],s=[],o=0;o<a.length;o+=1)r.push(a[o].title),s.push(a[o]);var i=r.indexOf(e.title),l=r.indexOf(t.title);s[i]=a[l],s[l]=a[i],n.setState({newColumns:s})},n.state={total:0,current:1,dataSource:[],newColumns:n.props.columns,loading:!1,searchParams:e.defaultSearchParams},n}return Object(l.a)(a,[{key:"pageSize",get:function(){return this.state.pageSize||this.props.pageSize||a.defaultPageSize||10}},{key:"maxPageIndex",get:function(){var e=this.state.total;return Math.max(1,Math.ceil(e/this.pageSize))}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.requestList()}},{key:"componentDidUpdate",value:function(e){e.columns!==this.props.columns&&this.setState({newColumns:this.props.columns})}},{key:"changePage",value:function(e){var n=this,t=this.state.current;e||(e=t);var a=this.maxPageIndex;e<1&&(e=1),e>a&&(e=a),this.setState({current:e},(function(){return n.requestList()}))}},{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"requestList",value:(n=Object(o.a)(r.a.mark((function e(){var n,t,a,o,i,l,c,d=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,t=n.getListFunction,a=n.onDataChange,o=this.state.searchParams,i=this.state.current,this.setLoading(!0),e.next=6,t(i,this.pageSize,o);case 6:l=e.sent,this.setLoading(!1),c={dataSource:l.dataSource,total:l.total},this.setState(Object(s.a)({},c),(function(){a&&a(c),d.state.current>d.maxPageIndex&&d.changePage()}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"defaultShowTotal",value:function(e,n){return"\u5171".concat(e,"\u9879")}},{key:"render",value:function(){var e=this,n=this.props,t=n.className,a=n.tableClassName,r=n.style,s=n.tableStyle,o=n.tableProps,i=n.renderExtra,l=n.rowKey,c=n.disableAutoHidePage,d=n.showTotal,b=void 0===d?this.defaultShowTotal:d,p=n.selectedEnable,h=n.showSizeChanger,g=void 0===h||h,f=n.showQuickJumper,S=void 0===f||f,j=(n.dragEnable,this.pageSize),y=this.state,x=y.selectedRowKeys,_=y.selectedRows,O=y.loading,T=y.dataSource,P=y.total,v=y.current,I=y.newColumns,w=y.searchParams,z=P/j;return m.a.createElement("div",{className:t,style:r},i&&i({selectedRowKeys:x,selectedRows:_,loading:O,searchParams:w,refresh:this.refresh,setSearchParams:this.setSearchParams}),m.a.createElement(u.a,Object.assign({className:a,bordered:!0,style:s},o,{rowKey:l||"id",loading:O,dataSource:T,pagination:!(!c&&z<=1)&&{total:P,current:v,showQuickJumper:S,showTotal:!1===b?void 0:b,showSizeChanger:g,pageSize:j,onChange:function(n){e.changePage(n)},onShowSizeChange:function(n,t){var a=v*j,r=Math.ceil(a/t);e.setState({pageSize:t},(function(){return e.changePage(r)}))}},rowSelection:p?{onChange:function(n,t){e.setState({selectedRowKeys:n,selectedRows:t})}}:void 0,columns:I})))}}]),a}(b.Component);p.defaultPageSize=10,n.a=p,"undefined"!==typeof p&&p&&p===Object(p)&&Object.isExtensible(p)&&Object.defineProperty(p,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"SearchTable",filename:"src/searchTable/SearchTable.tsx"}})}}]);